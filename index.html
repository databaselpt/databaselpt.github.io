<!DOCTYPE html>
<html>
<head>
    <title>Simpan Data ke GitHub</title>
    <script src="https://unpkg.com/github-api/dist/GitHub.bundle.min.js"></script>
</head>
<body>
    <h1>Formulir Data</h1>
    
    <form id="dataForm">
        <label for="nama">Nama:</label>
        <input type="text" id="nama" name="nama" required><br><br>
        
        <label for="harga">Harga:</label>
        <input type="number" id="harga" name="harga" required><br><br>
        
        <button type="button" onclick="simpanData()">Kirim Data</button>
    </form>
    
    <script>
     function simpanData() {
    var nama = document.getElementById('nama').value;
    var harga = document.getElementById('harga').value;

    var data = {
        nama: nama,
        harga: harga
    };

    fetch('https://api.github.com/repos/databaselpt/databaselpt.github.io/contents/data.json')
        .then(response => response.json())
        .then(fileData => {
            var existingData = JSON.parse(atob(fileData.content));
            existingData.push(data);

            var content = {
                message: 'Menyimpan data',
                content: btoa(JSON.stringify(existingData)),
                sha: fileData.sha
            };

            fetch('https://api.github.com/repos/databaselpt/databaselpt.github.io/contents/data.json', {
                method: 'PUT',
                headers: {
                    'Authorization': 'token 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',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(content)
            })
                .then(response => {
                    if (response.status === 200) {
                        alert('Data berhasil disimpan di GitHub');
                    } else {
                        alert('Gagal menyimpan data ke GitHub');
                    }
                })
                .catch(error => {
                    console.log(error);
                    alert('Gagal menyimpan data ke GitHub');
                });
        })
        .catch(error => {
            console.log(error);
            alert('Gagal menyimpan data ke GitHub');
        });
}


    </script>
</body>
</html>
